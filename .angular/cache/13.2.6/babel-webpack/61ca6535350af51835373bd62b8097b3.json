{"ast":null,"code":"import { nodeLink } from \"./raw-data\";\nimport * as _ from 'lodash';\nimport { DagreNodesOnlyLayout } from './customStepCurved';\nimport * as shape from 'd3-shape';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@swimlane/ngx-graph\";\nimport * as i3 from \"@angular/common\";\n\nfunction DiagramComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"marker\", 10);\n    i0.ɵɵelement(1, \"path\", 11);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DiagramComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"g\", 12);\n    i0.ɵɵelement(1, \"rect\", 13);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const cluster_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"width\", cluster_r9.dimension.width)(\"height\", cluster_r9.dimension.height)(\"fill\", cluster_r9.data.color);\n  }\n}\n\nfunction DiagramComponent_ng_template_5__svg_circle_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelement(0, \"circle\", 18);\n  }\n\n  if (rf & 2) {\n    const node_r10 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵattribute(\"cx\", 0)(\"cy\", 0)(\"stroke-width\", node_r10.strokeWidth)(\"stroke\", node_r10.stroke)(\"fill\", node_r10.data.color);\n  }\n}\n\nfunction DiagramComponent_ng_template_5__svg_text_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"text\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const node_r10 = i0.ɵɵnextContext().$implicit;\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵattribute(\"x\", ctx_r12.nodeSize(node_r10).width / 2)(\"y\", node_r10.dimension.height / 2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", node_r10.label, \" \");\n  }\n}\n\nfunction DiagramComponent_ng_template_5__svg_text_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"text\", 19);\n    i0.ɵɵtext(1, \" \\u00A0 \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const node_r10 = i0.ɵɵnextContext().$implicit;\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵattribute(\"x\", ctx_r13.nodeSize(node_r10).width / 2)(\"y\", node_r10.dimension.height / 2);\n  }\n}\n\nfunction DiagramComponent_ng_template_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"g\", 14);\n    i0.ɵɵelement(1, \"rect\", 15);\n    i0.ɵɵtemplate(2, DiagramComponent_ng_template_5__svg_circle_2_Template, 1, 5, \"circle\", 16);\n    i0.ɵɵtemplate(3, DiagramComponent_ng_template_5__svg_text_3_Template, 2, 3, \"text\", 17);\n    i0.ɵɵtemplate(4, DiagramComponent_ng_template_5__svg_text_4_Template, 2, 2, \"text\", 17);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const node_r10 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"width\", ctx_r5.nodeSize(node_r10).width)(\"height\", ctx_r5.nodeSize(node_r10).height)(\"fill\", ctx_r5.lodash.includes(ctx_r5.dotarray, node_r10.id) || node_r10.id === \"glseper\" ? \"#cdffe6\" : \"#fff\")(\"stroke\", node_r10.stroke)(\"rx\", node_r10.rx);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.lodash.includes(ctx_r5.dotarray, node_r10.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", node_r10.id !== \"dot\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", node_r10.id === \"dot\");\n  }\n}\n\nfunction DiagramComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"g\", 20);\n    i0.ɵɵelement(1, \"path\", 21);\n    i0.ɵɵelementStart(2, \"text\", 22)(3, \"textPath\", 23);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const link_r17 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleProp(\"dominant-baseline\", link_r17.dominantBaseline);\n    i0.ɵɵattribute(\"href\", \"#\" + link_r17.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", link_r17.label, \" \");\n  }\n}\n\nfunction DiagramComponent_li_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 24);\n    i0.ɵɵlistener(\"mouseenter\", function DiagramComponent_li_18_Template_li_mouseenter_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r20);\n      const item_r18 = restoredCtx.$implicit;\n      const ctx_r19 = i0.ɵɵnextContext();\n      return ctx_r19.mouseEnter(item_r18);\n    })(\"mouseleave\", function DiagramComponent_li_18_Template_li_mouseleave_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r20);\n      const item_r18 = restoredCtx.$implicit;\n      const ctx_r21 = i0.ɵɵnextContext();\n      return ctx_r21.mouseLeave(item_r18);\n    });\n    i0.ɵɵelement(1, \"i\", 25);\n    i0.ɵɵelementStart(2, \"div\")(3, \"h6\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"span\", 26);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const item_r18 = ctx.$implicit;\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵstyleProp(\"color\", ctx_r8.setDot(item_r18));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r8.setname(item_r18), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r8.setDes(item_r18), \" \");\n  }\n}\n\nexport let DiagramComponent = /*#__PURE__*/(() => {\n  class DiagramComponent {\n    constructor(http) {\n      this.http = http;\n      this.layoutSettings = {\n        orientation: 'TB'\n      };\n      this.links = [...nodeLink.links];\n      this.nodes = [...nodeLink.node];\n      this.curve = shape.curveLinear;\n      this.lodash = _;\n      this.dotarray = ['markupcomp', 'surge', 'dot', 'stageone', 'stagetwo', 'recycle'];\n      this.layout = new DagreNodesOnlyLayout();\n      this.strokeWidth = 0;\n      this.nodes = this.nodes.map(v => {\n        if (v.id === \"stageone\" || v.id === \"stagetwo\") {\n          v.rx = 75;\n        } else if (v.id === \"surge\") {\n          v.rx = 25;\n        } else {\n          v.rx = 10;\n        }\n\n        return v;\n      });\n    }\n\n    ngOnInit() {\n      this.dotarray.forEach(item => {\n        console.log(_.findLast(this.nodes, v => v.id === item), '++++++');\n      });\n    }\n\n    nodeSize(node) {\n      // console.log(node);\n      if (node.id === \"glseper\") {\n        return {\n          width: 200,\n          height: 250\n        };\n      } else if (node.id === \"stageone\" || node.id === \"stagetwo\") {\n        return {\n          width: 140,\n          height: 250\n        };\n      } else if (node.id === \"surge\") {\n        return {\n          width: 150,\n          height: 50\n        };\n      } else {\n        return {\n          width: node.dimension.width,\n          height: node.dimension.height\n        };\n      }\n    }\n\n    setname(item) {\n      let json = _.findLast(this.nodes, v => v.id === item);\n\n      return json === null || json === void 0 ? void 0 : json.label;\n    }\n\n    setDes(item) {\n      let json = _.findLast(this.nodes, v => v.id === item);\n\n      return json === null || json === void 0 ? void 0 : json.desp;\n    }\n\n    setDot(item) {\n      let json = _.findLast(this.nodes, v => v.id === item);\n\n      return json === null || json === void 0 ? void 0 : json.data.color;\n    }\n\n    mouseEnter(item) {\n      let json = _.findIndex(this.nodes, v => v.id === item);\n\n      nodeLink.node[json].strokeWidth = 10;\n      console.log(json, nodeLink.node);\n      return nodeLink.node[json].strokeWidth = 10;\n    }\n\n    mouseLeave(item) {\n      let json = _.findIndex(this.nodes, v => v.id === item);\n\n      console.log(json);\n      return nodeLink.node[json].strokeWidth = 0;\n    }\n\n  }\n\n  DiagramComponent.ɵfac = function DiagramComponent_Factory(t) {\n    return new (t || DiagramComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n  };\n\n  DiagramComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DiagramComponent,\n    selectors: [[\"app-diagram\"]],\n    decls: 19,\n    vars: 8,\n    consts: [[\"layout\", \"dagreCluster\", 1, \"chart-container\", 3, \"links\", \"nodes\", \"curve\", \"layout\", \"layoutSettings\", \"enableZoom\", \"autoZoom\"], [\"defsTemplate\", \"\"], [\"clusterTemplate\", \"\"], [\"nodeTemplate\", \"\"], [\"linkTemplate\", \"\"], [1, \"right-panel\"], [2, \"margin\", \"28px 0\"], [1, \"text-muted\"], [1, \"list-group\", \"list\"], [\"class\", \"list-group-item\", \"style\", \"margin-bottom: 15px; display: flex;\", 3, \"mouseenter\", \"mouseleave\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"arrow\", \"viewBox\", \"0 -5 10 10\", \"refX\", \"8\", \"refY\", \"0\", \"markerWidth\", \"4\", \"markerHeight\", \"4\", \"orient\", \"auto\"], [\"d\", \"M0,-5L10,0L0,5\", 1, \"arrow-head\"], [1, \"node\", \"cluster\"], [\"rx\", \"5\", \"ry\", \"5\"], [1, \"node\"], [\"stroke-width\", \"2\", \"stroke-linejoin\", \"round\"], [\"r\", \"20\", 4, \"ngIf\"], [\"dominant-baseline\", \"middle\", \"text-anchor\", \"middle\", 4, \"ngIf\"], [\"r\", \"20\"], [\"dominant-baseline\", \"middle\", \"text-anchor\", \"middle\"], [1, \"edge\"], [\"stroke-width\", \"2\", \"marker-end\", \"url(#arrow)\", 1, \"line\"], [\"text-anchor\", \"middle\", 1, \"edge-label\"], [\"startOffset\", \"50%\", 1, \"text-path\"], [1, \"list-group-item\", 2, \"margin-bottom\", \"15px\", \"display\", \"flex\", 3, \"mouseenter\", \"mouseleave\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-circle\"], [1, \"text-muted\", 2, \"font-size\", \"small\"]],\n    template: function DiagramComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ngx-graph\", 0);\n        i0.ɵɵtemplate(1, DiagramComponent_ng_template_1_Template, 2, 0, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(3, DiagramComponent_ng_template_3_Template, 2, 3, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(5, DiagramComponent_ng_template_5_Template, 5, 8, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(7, DiagramComponent_ng_template_7_Template, 5, 4, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 5)(10, \"h4\");\n        i0.ɵɵtext(11, \"Current Recomendation\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 6)(13, \"h5\");\n        i0.ɵɵtext(14, \"Margin increased oppurtunity: $334.45\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"h6\", 7);\n        i0.ɵɵtext(16, \"Recomendation generated at 05-08-21\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"ul\", 8);\n        i0.ɵɵtemplate(18, DiagramComponent_li_18_Template, 7, 4, \"li\", 9);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"links\", ctx.links)(\"nodes\", ctx.nodes)(\"curve\", ctx.curve)(\"layout\", ctx.layout)(\"layoutSettings\", ctx.layoutSettings)(\"enableZoom\", true)(\"autoZoom\", true);\n        i0.ɵɵadvance(18);\n        i0.ɵɵproperty(\"ngForOf\", ctx.dotarray);\n      }\n    },\n    directives: [i2.GraphComponent, i3.NgIf, i3.NgForOf],\n    styles: [\".right-panel[_ngcontent-%COMP%]{position:fixed;right:0;top:0;padding:40px}.list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}.list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{line-height:3;margin-right:15px}.list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{box-shadow:1px 7px 10px gray}\"]\n  });\n  return DiagramComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}