<ngx-graph
  class="chart-container"
  [links]="links"
  [nodes]="nodes"

  layout="dagreCluster"
>
  <ng-template #defsTemplate>
    <svg:marker id="arrow" viewBox="0 -5 10 10" refX="8" refY="0" markerWidth="4" markerHeight="4" orient="auto">
      <svg:path d="M0,-5L10,0L0,5" class="arrow-head" />
    </svg:marker>
  </ng-template>

  <ng-template #clusterTemplate let-cluster>
    <svg:g class="node cluster">
      <svg:rect
        rx="5"
        ry="5"
        [attr.width]="cluster.dimension.width"
        [attr.height]="cluster.dimension.height"
        [attr.fill]="cluster.data.color"
      />
    </svg:g>
  </ng-template>

  <ng-template #nodeTemplate let-node>
    <svg:g class="node">
      <svg:rect

        [attr.width]="nodeSize(node).width"
        [attr.height]="nodeSize(node).height"
        [attr.fill]="'#fff'"
        stroke-width="2"
        [attr.stroke]="node.stroke"
        stroke-linejoin="round"
        [attr.rx]="node.rx"
      />
      <!-- <path d="M0,0 h200 a20,20 0 0 1 20,20 v200 a20,20 0 0 1 -20,20 h-200 a20,20 0 0 1 -20,-20 v-200 a20,20 0 0 1 20,-20 z" fill="none"   stroke="black" stroke-width="3" *ngIf="node.id === 'glseper'"/> -->

      <circle [attr.cx]="nodeSize(node).width / 2" [attr.cy]="0" r="7" [attr.fill]="node.data.color" *ngIf="lodash.includes(this.dotarray, node.id)" />
        <svg:text [attr.x]="nodeSize(node).width / 2" [attr.y]="node.dimension.height / 2" dominant-baseline="middle" text-anchor="middle">
        {{node.label}}
      </svg:text>
    </svg:g>
  </ng-template>

  <ng-template #linkTemplate let-link>
    <svg:g class="edge">
      <svg:path class="line" stroke-width="2" marker-end="url(#arrow)"></svg:path>
      <svg:text class="edge-label" text-anchor="middle">
        <textPath
          class="text-path"
          [attr.href]="'#' + link.id"
          [style.dominant-baseline]="link.dominantBaseline"
          startOffset="50%"
        >
          {{link.label}}
        </textPath>
      </svg:text>
    </svg:g>
  </ng-template>
</ngx-graph>

<div class="right-panel">
  <h4>Current Recomendation</h4>
  <h5>Margin increased oppurtunity: $334.45</h5>
  <h6>Recomendation generated at 05-08-21</h6>
  <ul class="list-group">
    <li class="list-group-item">Cras justo odio</li>
    <li class="list-group-item">Dapibus ac facilisis in</li>
    <li class="list-group-item">Morbi leo risus</li>
    <li class="list-group-item">Porta ac consectetur ac</li>
    <li class="list-group-item">Vestibulum at eros</li>
  </ul>
</div>
